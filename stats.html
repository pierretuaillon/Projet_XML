<script type="text/javascript" src="__header.js"></script>

<!-- Inclusion du module socket.io -->
<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="http://localhost:4040/socket.io/socket.io.js"></script>
<script type="text/javascript">

// Connexion au socket serveur
var socket = io.connect('http://localhost:4040');


window.onload = function() {
    requete();
}

function requete() {
	socket.emit('statsRegions', 'client demande les statistiques par regions');
}	

socket.on('statsRegions', function(tab) {

	tab=tab.split(';');
	var py=10;
	for(i = 0 ; i+1 < tab.length ; i+=2) {
		var texte = tab[i+1]+' en '+tab[i];
		document.getElementById("statsRegions").innerHTML+='<g class="bar">    <rect width="'+(tab[i+1]/10)+'" height="19" y="'+py+'"></rect> <text width="1000" x="'+(tab[i+1]/10+10)+'" y="'+(py+10)+'" dy=".35em">'+texte+'</text>  </g>';
		document.getElementById("p").innerHTML+=texte+', ';
		py+=20;
	}
});















</script>



<p id="p"></p>

<!-- <input id="Region" class="btnGenese" type="button" value="Générer" onclick="dessiner()" /> -->
<figure>  <figcaption>Statistiques :</figcaption><svg id="statsRegions" class="chart" width="100%" height="100%" aria-labelledby="title" role="img"><title>Statistiques par région</title>
<!-- remplissage -->
</svg></figure>



<script type="text/javascript" src="__footer.js"></script>